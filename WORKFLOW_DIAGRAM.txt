# WORKFLOW VISUALIZATION - Interview Automation System

## COMPLETE USER JOURNEY MAP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     RECRUITER JOURNEY                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CREATE ACCOUNT
   POST /register
   { email, password, firstName, lastName, role: "Recruiter" }
   â†“
2. LOGIN
   POST /login
   â†’ Receive user info (no token needed)
   â†’ Use X-User-Role: Recruiter header for all GraphQL requests
   â†“
3. POST A JOB
   mutation { createJob(...) }
   â†’ Job created with status: null or "Open"
   â†“
4. WAIT FOR APPLICATIONS
   â† Applicants apply to your job
   â†“
5. REVIEW APPLICATIONS
   { jobs(...) { applicants { ... } } }
   { applications(jobId: X) { ... } }
   â†“
6. INVITE TO INTERVIEW â­ [TRIGGERS EMAIL]
   mutation {
     updateApplicationStatusByNames(
       status: "Interviewing"
     )
   }
   âœ‰ï¸ â†’ Interview invitation email sent to candidate
   â†“
7. ADD MANAGER NOTES â­ [NEW FEATURE]
   mutation {
     addManagerNoteToApplication(
       note: "Great interview..."
     )
   }
   â†’ Timestamped note appended
   â†“
8. HIRE CANDIDATE â­ [TRIGGERS AUTOMATION]
   mutation {
     updateApplicationStatusByNames(
       status: "Hired"
     )
   }
   â†’ ğŸ¤– AUTOMATED WORKFLOW:
      1. Mark application as "Hired"
      2. Close the job (status: "Closed")
      3. Find all other applicants for this job
      4. Send rejection emails to all unsuccessful candidates
   âœ‰ï¸ â†’ Mass rejection emails sent (background thread)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APPLICANT JOURNEY                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CREATE ACCOUNT
   POST /register
   { email, password, firstName, lastName, role: "Applicant" }
   â†“
2. UPDATE PROFILE
   mutation {
     updateUser(
       skills: [...]
       years_of_experience: X
       professionalTitle: "..."
     )
   }
   â†“
3. (OPTIONAL) UPLOAD RESUME
   POST /users/{userId}/resume
   â†’ PDF/DOCX parsed automatically
   â†’ Skills extracted and added to profile
   â†“
4. SEARCH FOR JOBS
   { jobs(location: "...", title: "...") { ... } }
   â†“
5. APPLY TO JOB
   mutation {
     apply(
       userName: "Your Name"
       jobTitle: "Job Title"
       companyName: "Company"
     )
   }
   â†’ Application created with status: "Applied"
   â†“
6. ADD APPLICATION NOTE (Optional)
   mutation {
     addNoteToApplicationByJob(
       jobTitle: "..."
       note: "Why I'm interested..."
     )
   }
   â†“
7. WAIT FOR RECRUITER DECISION
   â†“
8. RECEIVE EMAIL â­ [AUTOMATED]
   
   If status â†’ "Interviewing":
   âœ‰ï¸ Receive interview invitation email
   
   If someone else hired for same job:
   âœ‰ï¸ Receive rejection notification email


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     EMAIL AUTOMATION FLOWS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLOW 1: INTERVIEW INVITATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Trigger: updateApplicationStatusByNames(newStatus: "Interviewing")
â†“
Check: newStatus == "Interviewing" ?
â†“ YES
email_service.send_interview_invitation(
  to: candidate.email
  name: candidate.firstName
  job: job.title
  company: job.company
)
â†“
âœ‰ï¸ Email sent via Resend API
Subject: "Interview Invitation for {job} position at {company}"
Template: Congratulatory + next steps


FLOW 2: AUTOMATED JOB CLOSURE & MASS REJECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Trigger: updateApplicationStatusByNames(newStatus: "Hired")
â†“
Check: newStatus == "Hired" ?
â†“ YES
Start Background Thread â†’ _handle_hired_status_side_effects()
â”‚
â”œâ”€ Step 1: Close the job
â”‚  job_repo.update_one(jobId, {status: "Closed"})
â”‚
â”œâ”€ Step 2: Find all other applications for this job
â”‚  applications = find({ jobId: X, userId: {$ne: hired_user_id} })
â”‚
â””â”€ Step 3: Send rejection emails to each
   for app in applications:
     if app.status not in ["Hired", "Rejected"]:
       email_service.send_rejection_notification(
         to: candidate.email
         name: candidate.firstName
         job: job.title
         company: job.company
       )
â†“
âœ‰ï¸ Multiple emails sent via Resend API
Subject: "Update on your application for {job} at {company}"
Template: Professional rejection + best wishes


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AUTHORIZATION & SECURITY                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

All GraphQL requests use header-based auth:
  X-User-Role: "Recruiter" or "Applicant"

RECRUITER-ONLY MUTATIONS:
  âœ“ updateApplicationStatusByNames
  âœ“ addManagerNoteToApplication
  âœ“ updateJobByFields
  âœ“ deleteJobByFields

APPLICANT-ONLY MUTATIONS:
  âœ“ addNoteToApplicationByJob (only own applications)

SHARED MUTATIONS:
  âœ“ apply (anyone can apply)
  âœ“ updateUser (only own profile)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE STATE CHANGES                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

APPLICATION STATUS LIFECYCLE:
  Applied â†’ Interviewing â†’ Hired
  Applied â†’ Interviewing â†’ Rejected
  Applied â†’ Rejected

JOB STATUS LIFECYCLE:
  null/Open â†’ Closed (when someone hired)

NOTES FIELD (Applications):
  "Applicant note"
  â†“ (recruiter adds note)
  "Applicant note
   --- Recruiter Note (2025-11-23): Manager feedback here"
  â†“ (recruiter adds another note)
  "Applicant note
   --- Recruiter Note (2025-11-23): Manager feedback here
   --- Recruiter Note (2025-11-24): Follow-up feedback"


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  NATURAL LANGUAGE EXAMPLES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

POST /nl2gql?run=true
Header: X-User-Role: Recruiter

Example Queries:
  "Interview Charlie Brown for the Google job"
  â†’ Generates: updateApplicationStatusByNames(...)
  
  "Hire Diana Prince for Product Manager at Meta"
  â†’ Generates: updateApplicationStatusByNames(..., newStatus: "Hired")
  â†’ Triggers: Email automation
  
  "Add note to Bob's application: Great coding skills"
  â†’ Generates: addManagerNoteToApplication(...)
  
  "Show me all applicants for the Netflix job"
  â†’ Generates: jobs(company: "Netflix") { applicants { ... } }


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TESTING CHECKLIST                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â–¡ Recruiter can create account
â–¡ Recruiter can post a job  
â–¡ Applicant can create account
â–¡ Applicant can update profile
â–¡ Applicant can apply to job
â–¡ Recruiter can view applications
â–¡ Recruiter can update status to "Interviewing"
  â–¡ Email sent to candidate âœ‰ï¸
  â–¡ Email visible in Resend dashboard
â–¡ Recruiter can add manager notes
  â–¡ Notes are timestamped
  â–¡ Multiple notes preserved
â–¡ Recruiter can hire a candidate
  â–¡ Job automatically closed
  â–¡ Other applicants receive rejection emails âœ‰ï¸
  â–¡ All emails visible in Resend dashboard
â–¡ Natural language commands work
  â–¡ Interview command works
  â–¡ Hire command works
  â–¡ Note command works

Email Dashboard: https://resend.com/emails
```
